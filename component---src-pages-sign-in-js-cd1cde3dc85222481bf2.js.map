{"version":3,"sources":["webpack:///./src/components/login/Form.js","webpack:///./src/components/login/LoginContainer.js","webpack:///./src/pages/sign_in.js"],"names":["LoginForm","props","handleSubmit","e","preventDefault","data","FormData","target","window","fetch","method","body","JSON","stringify","user","Object","fromEntries","headers","then","response","setAuthToken","get","status","setSuccessMessage","navigate","setState","state","isInvalid","catch","error","setErrorMessage","message","render","Form","onSubmit","this","className","icon","faExclamationTriangle","Group","Control","size","name","placeholder","Feedback","type","Button","variant","React","Component","LoginContainer","mapDispatchToProps","connect","SignInPage","pageInfo","pageName","title","keywords","to"],"mappings":"mQAuFeA,E,oBAhFb,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAIFC,aAAe,SAAAC,GACbA,EAAEC,iBACF,IAAMC,EAAO,IAAIC,SAASH,EAAEI,QAEV,oBAAXC,QAA0BA,OAAOC,MAAM,yDAA0D,CACtGC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CAAEC,KAAMC,OAAOC,YAAYX,KAChDY,QAAS,CACP,OAAU,mBACV,eAAgB,sBAGjBC,MAAK,SAAAC,GAGJ,OAFA,EAAKlB,MAAMmB,aAAaD,EAASF,QAAQI,IAAI,kBAErCF,EAASG,QACf,KAAK,IACH,EAAKrB,MAAMsB,kBAAkB,2BAC7BC,mBAAS,KACT,MACF,KAAK,IACH,EAAKC,UAAS,SAAAC,GACZ,OAAO,OAAP,UAAYA,EAAZ,CAAmBC,WAAW,WAMrCC,OAAM,SAAAC,GAAK,OAAI,EAAK5B,MAAM6B,gBAAgBD,EAAME,aA/BnD,EAAKL,MAAQ,CAAEC,WAAW,GAFT,E,0GAoCnBK,OAAA,WACE,OACE,kBAACC,EAAA,EAAD,CAAMC,SAAUC,KAAKjC,cACnB,wBAAIkC,UAAU,iBAAd,WACCD,KAAKT,MAAMC,WACV,0BAAMS,UAAU,uBACd,kBAAC,IAAD,CAAiBC,KAAMC,MADzB,oCAKF,kBAACL,EAAA,EAAKM,MAAN,CAAYH,UAAU,iBACpB,kBAACH,EAAA,EAAKO,QAAN,CACEb,UAAWQ,KAAKT,MAAMC,UACtBc,KAAK,KACLC,KAAK,WACLC,YAAY,cAEd,kBAACV,EAAA,EAAKO,QAAQI,SAAd,CAAuBC,KAAK,aAG9B,kBAACZ,EAAA,EAAKM,MAAN,KACE,kBAACN,EAAA,EAAKO,QAAN,CACEb,UAAWQ,KAAKT,MAAMC,UACtBc,KAAK,KACLC,KAAK,WACLG,KAAK,WACLF,YAAY,aAEd,kBAACV,EAAA,EAAKO,QAAQI,SAAd,CAAuBC,KAAK,aAG9B,kBAACC,EAAA,EAAD,CACEV,UAAU,gBACVK,KAAK,KACLM,QAAQ,UACRF,KAAK,UAJP,a,GApEgBG,IAAMC,W,ICGxBC,E,gLACJlB,OAAA,WACE,OACE,kBAAC,EAAD,CACEZ,aAAce,KAAKlC,MAAMmB,aACzBG,kBAAmBY,KAAKlC,MAAMsB,kBAC9BO,gBAAiBK,KAAKlC,MAAM6B,mB,GANPkB,IAAMC,WAgB7BE,EAAqB,CAAE/B,iBAAcG,sBAAmBO,qBAE/CsB,eANS,SAAA1B,GACtB,MAAO,KAOPyB,EAFaC,CAGbF,G,ICvBIG,E,gLACJrB,OAAA,WACE,OACE,kBAAC,IAAD,CAAQsB,SAAU,CAAEC,SAAU,YAC5B,kBAAC,IAAD,CAAKC,MAAM,SAASC,SAAU,CAAC,SAAD,uBAE9B,yBAAKrB,UAAU,gBACb,kBAAC,EAAD,MACA,wDACyB,kBAAC,OAAD,CAAMsB,GAAG,YAAT,e,GATVV,IAAMC,WAiBhBI","file":"component---src-pages-sign-in-js-cd1cde3dc85222481bf2.js","sourcesContent":["import { navigate } from \"gatsby\"\nimport React from \"react\"\nimport { Form, Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\"\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { isInvalid: false }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n    const data = new FormData(e.target)\n\n    typeof window !== 'undefined' && window.fetch(\"https://todolist-endpoints.herokuapp.com/users/sign_in\", {\n      method: \"POST\",\n      body: JSON.stringify({ user: Object.fromEntries(data) }),\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then(response => {\n        this.props.setAuthToken(response.headers.get(\"Authorization\"))\n\n        switch (response.status) {\n          case 201:\n            this.props.setSuccessMessage(\"Logged in successfully!\")\n            navigate(\"/\")\n            break\n          case 401:\n            this.setState(state => {\n              return { ...state, isInvalid: true }\n            })\n            break\n          default:\n        }\n      })\n      .catch(error => this.props.setErrorMessage(error.message))\n  }\n\n  render() {\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        <h3 className=\"form__element\">Sign In</h3>\n        {this.state.isInvalid && (\n          <span className=\"form__error_message\">\n            <FontAwesomeIcon icon={faExclamationTriangle} /> Incorect login\n            or(and) password\n          </span>\n        )}\n        <Form.Group className=\"form__element\">\n          <Form.Control\n            isInvalid={this.state.isInvalid}\n            size=\"lg\"\n            name=\"username\"\n            placeholder=\"User Name\"\n          />\n          <Form.Control.Feedback type=\"invalid\" />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Control\n            isInvalid={this.state.isInvalid}\n            size=\"lg\"\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n          <Form.Control.Feedback type=\"invalid\" />\n        </Form.Group>\n\n        <Button\n          className=\"form__element\"\n          size=\"lg\"\n          variant=\"primary\"\n          type=\"submit\"\n        >\n          Sign In\n        </Button>\n      </Form>\n    )\n  }\n}\n\nexport default LoginForm\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport { setAuthToken } from \"../../store/auth/actions\"\nimport {\n  setSuccessMessage,\n  setErrorMessage,\n} from \"../../store/messages/actions\"\nimport Form from \"./Form\"\n\nclass LoginContainer extends React.Component {\n  render() {\n    return (\n      <Form\n        setAuthToken={this.props.setAuthToken}\n        setSuccessMessage={this.props.setSuccessMessage}\n        setErrorMessage={this.props.setErrorMessage}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {}\n}\n\nconst mapDispatchToProps = { setAuthToken, setSuccessMessage, setErrorMessage }\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginContainer)\n","import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport LoginContainer from \"../components/login/LoginContainer\"\n\nclass SignInPage extends React.Component {\n  render() {\n    return (\n      <Layout pageInfo={{ pageName: \"sign_in\" }}>\n        <SEO title=\"SignIn\" keywords={[`gatsby`, `react`, `bootstrap`]} />\n\n        <div className=\"form_wrapper\">\n          <LoginContainer />\n          <span>\n            Don't have an account? <Link to=\"/sign_up\">Sign Up</Link>\n          </span>\n        </div>\n      </Layout>\n    )\n  }\n}\n\nexport default SignInPage\n"],"sourceRoot":""}